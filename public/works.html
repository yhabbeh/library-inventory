<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>Works Management - Update Book Images</title>
    <link rel="stylesheet" href="/src/style.css">
    <link rel="stylesheet" href="/src/works-style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Minimal inline styles for specific layout needs, rest in style.css */
        body {
            background-color: var(--bg-body);
            color: var(--text-primary);
        }
    </style>
</head>

<body>
    <div id="app" class="works-app">
        <header class="works-header">
            <div class="logo-area">
                <h1>ููุชุจุฉ ูุนู - ุฅุฏุงุฑุฉ ุงูุตูุฑ</h1>
                <p>ุชุญุฏูุซ ุตูุฑ ุงููุชุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช</p>
            </div>
            <a href="/" class="back-link">ุงูุนูุฏุฉ ูููุชุฌุฑ</a>
        </header>

        <main class="works-container">
            <!-- Processing Step 1: Search -->
            <section id="search-section" class="step-section active">
                <div class="container-inner">
                    <h2>ุงูุจุญุซ ุนู ุงููุชุจ</h2>
                    <p class="section-description">ุงุจุญุซ ุนู ูุชุงุจ ูุชุญุฏูุซ ุตูุฑุชู</p>

                    <div class="search-box-large">
                        <label for="book-search">ุงุจุญุซ ุนู ูุชุงุจ ูุชุนุฏููู</label>
                        <input type="text" id="book-search" placeholder="ุงูุชุจ ุงุณู ุงููุชุงุจ ุฃู ุงููุคูู..." autocomplete="off">
                        <div id="search-results" class="search-results-dropdown"></div>
                    </div>
                </div>
            </section>

            <!-- Processing Step 2: Edit/Upload -->
            <section id="edit-section" class="step-section hidden">
                <div class="container-inner">
                    <div class="edit-header">
                        <h2>ุชุญุฏูุซ ุตูุฑุฉ ุงููุชุงุจ</h2>
                        <button id="btn-back-to-search" class="btn-secondary back-btn">ุงูุนูุฏุฉ ุฅูู ุงูุจุญุซ</button>
                    </div>

                    <div class="book-preview-card" id="current-book-card">
                        <!-- Javascript will populate this -->
                    </div>

                    <div class="action-area">
                        <div class="current-image-status">
                            <h3><span class="icon">๐ผ๏ธ</span> ุงูุตูุฑุฉ ุงูุญุงููุฉ</h3>
                            <div id="current-image-display" class="image-displaybox">
                                <!-- Existing image or placeholder -->
                            </div>
                        </div>

                        <div class="upload-controls">
                            <h3><span class="icon">๐ค</span> ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ</h3>

                            <div class="file-drop-zone" id="drop-zone">
                                <span class="icon">๐</span>
                                <div class="drop-zone-content">
                                    <p>ุงุณุญุจ ุงูุตูุฑุฉ ููุง ุฃู ุงุถุบุท ููุงุฎุชูุงุฑ</p>
                                    <small>ุงูุตูุบ ุงูููุจููุฉ: JPG, PNG, GIF (ุฃูุตู ุญุฌู: 5MB)</small>
                                </div>
                                <input type="file" id="file-input" accept="image/*" hidden>
                            </div>

                            <div id="preview-container" class="preview-container hidden">
                                <img id="new-image-preview" src="" alt="ูุนุงููุฉ ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ">
                                <button id="clear-preview" class="btn-sm">ุฅูุบุงุก ุงููุนุงููุฉ</button>
                            </div>

                            <div class="actions-row">
                                <button id="btn-skip" class="btn-secondary">ุชุฎุทู (ุงููุชุงุจ ุงูุชุงูู)</button>
                                <button id="btn-upload" class="btn-primary" disabled>๐พ ุญูุธ ูุฑูุน ุงูุตูุฑุฉ</button>
                            </div>

                            <div id="upload-status" class="status-msg"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Authentication Modal -->
        <div id="auth-modal" class="modal" style="display: flex;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>๐ ุชุณุฌูู ุงูุฏุฎูู</h2>
                    <p>ูุฐู ุงูุตูุญุฉ ูุญููุฉ. ูุฑุฌู ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ูููุตูู ุฅูู ููุญุฉ ุงูุชุญูู.</p>
                </div>

                <div class="modal-body">
                    <input type="password" id="auth-password" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ...">
                    <div class="modal-actions">
                        <button id="btn-login" class="btn-primary">๐ ุฏุฎูู ุงููุธุงู</button>
                    </div>
                    <p id="auth-error" class="error">ูููุฉ ุงููุฑูุฑ ุฎุงุทุฆุฉุ ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู</p>
                </div>
            </div>
        </div>

        <!-- Apps Script Configuration Modal -->
        <div id="config-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุฑุจุท</h2>
                    <p>ูุฑุฌู ุฅุฏุฎุงู ุฑุงุจุท ุชุทุจูู Google Apps Script ููุจุฏุก</p>
                </div>

                <div class="modal-body">
                    <input type="text" id="script-url-input" placeholder="https://script.google.com/macros/s/...">
                    <p id="config-error" class="error">ุฎุทุฃ ูู ุงูุฑุงุจุท</p>
                    <div class="modal-actions">
                        <button id="save-config" class="btn-primary">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/src/works.js"></script>
</body>

</html>