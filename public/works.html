<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="no-referrer" />
    <title>Works Management - Update Book Images</title>
    <link rel="stylesheet" href="./src/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet" />
    <style>
        /* Minimal inline styles for specific layout needs, rest in style.css */
        body {
            background-color: var(--bg-main);
            color: var(--text-primary);
        }
    </style>
</head>

<body>
    <div id="app" class="works-app">
        <header class="works-header">
            <div class="logo-area">
                <h1>ููุชุจุฉ ูุนู - ุฅุฏุงุฑุฉ ุงูุตูุฑ</h1>
                <p>ุชุญุฏูุซ ุตูุฑ ุงููุชุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช</p>
            </div>
            <a href="/" class="back-link">ุงูุนูุฏุฉ ูููุชุฌุฑ</a>
        </header>

        <main class="works-container">
            <!-- Processing Step 1: Search -->
            <section id="search-section" class="step-section active">
                <div class="search-box-large">
                    <label for="book-search">ุงุจุญุซ ุนู ูุชุงุจ ูุชุนุฏููู</label>
                    <input type="text" id="book-search" placeholder="ุงูุชุจ ุงุณู ุงููุชุงุจ..." autocomplete="off" />
                    <div id="search-results" class="search-results-dropdown"></div>
                </div>
            </section>

            <!-- Processing Step 2: Edit/Upload -->
            <section id="edit-section" class="step-section hidden">
                <div class="book-preview-card" id="current-book-card">
                    <!-- Javascript will populate this -->
                </div>

                <div class="action-area">
                    <div class="current-image-status">
                        <h3>ุงูุตูุฑุฉ ุงูุญุงููุฉ</h3>
                        <div id="current-image-display" class="image-displaybox">
                            <!-- Existing image or placeholder -->
                        </div>
                    </div>

                    <div class="upload-controls">
                        <h3>ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ</h3>
                        <div class="file-drop-zone" id="drop-zone">
                            <span class="icon">๐</span>
                            <span class="text">ุงุณุญุจ ุงูุตูุฑุฉ ููุง ุฃู ุงุถุบุท ููุงุฎุชูุงุฑ</span>
                            <input type="file" id="file-input" accept="image/*" hidden />
                        </div>
                        <div id="preview-container" class="preview-container hidden">
                            <img id="new-image-preview" src="" alt="New Preview" />
                            <button id="clear-preview" class="btn-sm">ุฅูุบุงุก</button>
                        </div>

                        <div class="actions-row">
                            <button id="btn-skip" class="btn-secondary">ุชุฎุทู (ุงูุชุงูู)</button>
                            <button id="btn-upload" class="btn-primary" disabled>ุญูุธ ูุฑูุน ุงูุตูุฑุฉ</button>
                        </div>

                        <div id="upload-status" class="status-msg"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal" style="display: flex;">
        <div class="modal-content">
            <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
            <p>ูุฐู ุงูุตูุญุฉ ูุญููุฉ. ูุฑุฌู ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ.</p>
            <input type="password" id="auth-password" placeholder="Passcode"
                style="width: 100%; padding: 10px; margin: 10px 0;" />
            <button id="btn-login" class="btn-primary">ุฏุฎูู</button>
            <p id="auth-error" class="error" style="color:red; display:none;">ูููุฉ ุงููุฑูุฑ ุฎุงุทุฆุฉ</p>
        </div>
    </div>

    <!-- Apps Script Configuration Modal -->
    <div id="config-modal" class="modal">
        <div class="modal-content">
            <h2>ุฅุนุฏุงุฏุงุช ุงูุฑุจุท</h2>
            <p>ูุฑุฌู ุฅุฏุฎุงู ุฑุงุจุท Apps Script Web App ููุจุฏุก</p>
            <input type="text" id="script-url-input" placeholder="https://script.google.com/macros/s/..."
                style="width: 100%; padding: 10px; margin: 10px 0;" />
            <button id="save-config" class="btn-primary">ุญูุธ</button>
        </div>
    </div>

    <script type="module" src="/works.js"></script>
</body>

</html>